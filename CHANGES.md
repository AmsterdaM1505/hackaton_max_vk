# üìù –†–µ–∑—é–º–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π (PostgreSQL –≤–µ—Ä—Å–∏—è)

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏

### 1. –°–∏—Å—Ç–µ–º–∞ —á–∞—Ç–æ–≤ –ø–æ—Å–ª–µ –≤–∑–∞–∏–º–Ω–æ–π —Å–∏–º–ø–∞—Ç–∏–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `blocked_chats` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–µ—Ä–≤–∞–Ω–Ω—ã—Ö —á–∞—Ç–æ–≤
- ‚úÖ –ú–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç—ã —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏: `block_chat()`, `is_chat_blocked()`, `unblock_chat()`
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/chat_<user_id>` –¥–ª—è –≤—Ö–æ–¥–∞ –≤ —á–∞—Ç —Å –ø–æ–Ω—Ä–∞–≤–∏–≤—à–∏–º—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/stop_chat` –¥–ª—è –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è —á–∞—Ç–∞ (–±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–µ—Ä–µ–ø–∏—Å–∫—É –æ–±–æ—é–¥–Ω–æ)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å maxapi
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω–æ `event.message.from_user` –Ω–∞ `event.message.sender`
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω–æ `event.message.sender.display_name` –Ω–∞ `event.message.sender.first_name`
- ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ `user_id` –∏–∑ int –≤ str –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –ë–î
- ‚úÖ –í—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ `event.message.body.text` –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

### 3. –£–ª—É—á—à–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞—Ö —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –º–∞—Ä–∫–¥–∞—É–Ω–µ –∫–∞–∫ –∫–æ–¥-–∫–Ω–æ–ø–∫–∏
- ‚úÖ –ë–æ–ª–µ–µ –∫—Ä–∞—Å–∏–≤—ã–π –∏ —á–∏—Ç–∞–µ–º—ã–π –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ backticks)
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –º–µ–Ω—é (–≥–ª–∞–≤–Ω–æ–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —á–∞—Ç)

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `SETUP.md` —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –ø–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é –ë–î
- ‚úÖ –û–ø–∏—Å–∞–Ω—ã –≤—Å–µ –º–µ—Ç–æ–¥—ã Database API
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –º–µ—Ç–æ–¥–∞
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –æ—Ç–ª–∞–¥–∫–µ
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î

### 5. –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç `create_test_users.py`
- ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 6 —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (Alice, Bob, Charlie, Diana, Eva, Frank)
- ‚úÖ –°–æ–∑–¥–∞—ë—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –ª–∞–π–∫–∏ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –º—ç—Ç—á–µ–π
- ‚úÖ –í—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### 6. –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ PostgreSQL üöÄ
- ‚úÖ –ü–µ—Ä–µ–ø–∏—Å–∞–Ω `database.py` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PostgreSQL –≤–º–µ—Å—Ç–æ SQLite
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ JSONB –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è FSM
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `psycopg2-binary` –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ ON CONFLICT –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö INSERT/UPDATE –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ `config.py`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ `SETUP.md` –∏ `README.md`

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ PostgreSQL:
- üìä **JSONB** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ JSON —Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–µ–π
- üöÄ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- üîí **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å** - ACID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è, –±—ç–∫–∞–ø—ã
- ‚ö° **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- üìà **–ò–Ω–¥–µ–∫—Å—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

---

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
project/
‚îú‚îÄ‚îÄ handlers.py              ‚Üê –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ sender
‚îú‚îÄ‚îÄ database.py              ‚Üê üîÑ –ü–ï–†–ï–ü–ò–°–ê–ù –¥–ª—è PostgreSQL –≤–º–µ—Å—Ç–æ SQLite
‚îú‚îÄ‚îÄ keyboards.py             ‚Üê –û–±–Ω–æ–≤–ª–µ–Ω—ã —Å –∫—Ä–∞—Å–∏–≤—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∫–æ–º–∞–Ω–¥
‚îú‚îÄ‚îÄ states.py                ‚Üê –°–æ–¥–µ—Ä–∂–∏—Ç UserState.IN_CHAT (—É–∂–µ –±—ã–ª)
‚îú‚îÄ‚îÄ config.py                ‚Üê üîÑ –û–ë–ù–û–í–õ–Å–ù —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ PostgreSQL
‚îÇ
‚îú‚îÄ‚îÄ SETUP.md                 ‚Üê üîÑ –û–ë–ù–û–í–õ–Å–ù: –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ PostgreSQL
‚îú‚îÄ‚îÄ .env.example             ‚Üê üîÑ –û–ë–ù–û–í–õ–Å–ù: –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ë–î
‚îú‚îÄ‚îÄ create_test_users.py     ‚Üê üß™ –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ CHANGES.md               ‚Üê üìù –ù–û–í–´–ô: –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îÇ
‚îú‚îÄ‚îÄ README.md                ‚Üê üîÑ –û–ë–ù–û–í–õ–Å–ù —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ PostgreSQL
‚îú‚îÄ‚îÄ requirements.txt         ‚Üê üîÑ –û–ë–ù–û–í–õ–Å–ù: psycopg2-binary –≤–º–µ—Å—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ sqlite3
‚îî‚îÄ‚îÄ dating_bot.db            ‚Üê ‚ùå –£–î–ê–õ–Å–ù (–∏—Å–ø–æ–ª—å–∑—É PostgreSQL)
```

---

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ —Å PostgreSQL

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏ PostgreSQL
# macOS: brew install postgresql && brew services start postgresql
# Ubuntu: sudo apt-get install postgresql && sudo systemctl start postgresql
# Windows: –°–∫–∞—á–∞–π —Å https://www.postgresql.org/download/windows/

# 2. –°–æ–∑–¥–∞–π –ë–î
psql -U postgres
CREATE DATABASE dating_bot_db;
\q

# 3. –£–±–µ–¥–∏—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# 4. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª .env
cp .env.example .env

# 5. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π .env —Å–æ —Å–≤–æ–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
# BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
# DB_HOST=localhost
# DB_PORT=5432
# DB_NAME=dating_bot_db
# DB_USER=postgres
# DB_PASSWORD=postgres

# 6. –°–æ–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
python create_test_users.py

# 7. –ó–∞–ø—É—Å—Ç–∏ –±–æ—Ç
python main.py
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π

#### –¢–µ—Å—Ç 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
1. –û—Ç–ø—Ä–∞–≤—å `/start`
2. –í–≤–µ–¥–∏ –∏–º—è, –≤–æ–∑—Ä–∞—Å—Ç, –ø–æ–ª, –æ–ø–∏—Å–∞–Ω–∏–µ, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

#### –¢–µ—Å—Ç 2: –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–Ω–∫–µ—Ç –∏ –ª–∞–π–∫–∏
1. –û—Ç–ø—Ä–∞–≤—å `/browse`
2. –í—ã–±–µ—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é `/love`
3. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏ –ø—Ä–æ—Ñ–∏–ª–∏: `/like`, `/dislike`, `/skip`

#### –¢–µ—Å—Ç 3: –ú—ç—Ç—á–∏ –∏ —á–∞—Ç—ã (—Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏)
1. –í—ã–ø–æ–ª–Ω–∏ –ª–∞–π–∫–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. –û—Ç–ø—Ä–∞–≤—å `/messages` - —É–≤–∏–¥–∏—à—å —Å–ø–∏—Å–æ–∫ –º—ç—Ç—á–µ–π
3. –û—Ç–ø—Ä–∞–≤—å `/chat_1001` - –≤–æ–π–¥—ë—à—å –≤ —á–∞—Ç —Å Alice
4. –û—Ç–ø—Ä–∞–≤—å —Å–æ–æ–±—â–µ–Ω–∏–µ
5. –û—Ç–ø—Ä–∞–≤—å `/stop_chat` - –ø—Ä–µ—Ä–≤—ë—à—å —á–∞—Ç (–æ–±–æ—é–¥–Ω–æ)
6. –ü–æ–ø—ã—Ç–∞–π—Å—è —Å–Ω–æ–≤–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ - –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞ (—á–∞—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω)

#### –¢–µ—Å—Ç 4: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
1. –û—Ç–ø—Ä–∞–≤—å `/notifications` - —É–≤–∏–¥–∏—à—å –ª–∞–π–∫–∏ –∏ –º—ç—Ç—á–∏

---

## üóÑÔ∏è –†–∞–±–æ—Ç–∞ —Å PostgreSQL –ë–î

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –ë–î —á–µ—Ä–µ–∑ CLI

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ –ë–î
psql -U postgres dating_bot_db

# –ü–æ—Å–º–æ—Ç—Ä–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
SELECT user_id, name, age, gender FROM users;

# –ü–æ—Å–º–æ—Ç—Ä–∏ –ª–∞–π–∫–∏
SELECT * FROM likes;

# –ü–æ—Å–º–æ—Ç—Ä–∏ –º—ç—Ç—á–∏ (–≤–∑–∞–∏–º–Ω—ã–µ –ª–∞–π–∫–∏)
SELECT l1.user_from, l1.user_to FROM likes l1
JOIN likes l2 ON l1.user_from = l2.user_to AND l1.user_to = l2.user_from;

# –í—ã—Ö–æ–¥
\q
```

### –û—á–∏—Å—Ç–∏—Ç—å –ë–î (–Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ)

```bash
psql -U postgres dating_bot_db
TRUNCATE TABLE users CASCADE;  # –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
\q

# –∏–ª–∏ —á–µ—Ä–µ–∑ Python
from database import db
conn = db.get_connection()
cursor = conn.cursor()
cursor.execute('TRUNCATE TABLE users CASCADE')
conn.commit()
cursor.close()
conn.close()
```

### –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—Ä—É—á–Ω—É—é

```python
from database import db

db.create_user(
    user_id="99999",
    username="test_user",
    name="Test",
    age=25,
    gender="male",
    bio="Test bio",
    categories=["love", "friendship"]
)
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î

```python
from config import DATABASE_URL
import psycopg2

try:
    conn = psycopg2.connect(DATABASE_URL)
    print("‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ!")
    conn.close()
except Exception as e:
    print(f"‚ùå –û—à–∏–±–∫–∞: {e}")
```

---

## üéØ –ù–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –î–ª—è —á–∞—Ç–æ–≤
- **`/chat_<user_id>`** - –ù–∞—á–∞—Ç—å —á–∞—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç—Ç–æ –º—ç—Ç—á)
- **`/stop_chat`** - –ü—Ä–µ—Ä–≤–∞—Ç—å —á–∞—Ç –∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–ø–∏—Å–∫—É (–æ–±–æ—é–¥–Ω–æ)

### –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- **`/notifications`** - –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ª–∞–π–∫–∞—Ö –∏ –º—ç—Ç—á–∞—Ö

---

## üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –û—à–∏–±–∫–∏ API maxapi:
1. ‚ùå `event.message.from_user` ‚Üí ‚úÖ `event.message.sender`
2. ‚ùå `event.message.sender.display_name` ‚Üí ‚úÖ `event.message.sender.first_name`
3. ‚ùå `event.message.sender.user_id` (int) ‚Üí ‚úÖ `str(event.message.sender.user_id)`
4. ‚ùå –ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —á–∞—Ç–æ–≤ ‚Üí ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

### –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î:
1. ‚ùå SQLite —Å —Ñ–∞–π–ª–æ–º `dating_bot.db` ‚Üí ‚úÖ PostgreSQL —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–æ–º
2. ‚ùå JSON —Ö—Ä–∞–Ω–µ–Ω–∏–µ ‚Üí ‚úÖ JSONB –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã
3. ‚ùå –ü–ª–æ—Ö–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å ‚Üí ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
4. ‚ùå –ù–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ ‚Üí ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **`SETUP.md`** - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ë–î –∏ API
- **`README.md`** - –û–±–Ω–æ–≤–ª–µ–Ω–æ —Å–æ —Å—Å—ã–ª–∫–æ–π –Ω–∞ SETUP.md –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
- **`create_test_users.py`** - –°–∫—Ä–∏–ø—Ç —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π

---

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —á–∞—Ç–æ–≤
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ **–æ–±–æ—é–¥–Ω–∞—è** (–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –≤ –ë–î: –º–µ–Ω—å—à–∏–π ID –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–≤—ã–π)
- –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —á–∞—Ç –≤—ã–≤–æ–¥–∏—Ç—Å—è –æ—à–∏–±–∫–∞
- –ü–æ—Å–ª–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ —á–∞—Ç–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –º–µ–Ω—é

### –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- –í—Å–µ –∫–æ–º–∞–Ω–¥—ã —Ç–µ–ø–µ—Ä—å –≤ backticks –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ–Ω—é —è—Å–Ω–∞—è –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–∞—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —ç–º–æ–¥–∑–∏ –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏

### –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- 6 –≥–æ—Ç–æ–≤—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π —Å —Ä–∞–∑–Ω—ã–º–∏ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º–∏
- –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –º—ç—Ç—á–∏ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Ñ—É–Ω–∫—Ü–∏–π

---

## üåê –û–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –î–æ (SQLite)
- ‚úÖ Python 3.8+
- ‚ùå PostgreSQL –Ω–µ —Ç—Ä–µ–±–æ–≤–∞–ª—Å—è
- ‚úÖ SQLite –≤—Å—Ç—Ä–æ–µ–Ω –≤ Python
- ‚úÖ `sqlite3` –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å

### –ü–æ—Å–ª–µ (PostgreSQL)
- ‚úÖ Python 3.8+
- ‚úÖ PostgreSQL 12+
- ‚úÖ `psycopg2-binary` –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –ë–î

---

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-11-08
**–í–µ—Ä—Å–∏—è:** 2.0 (PostgreSQL Edition)
